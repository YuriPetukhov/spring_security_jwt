# Реализация аутентификации и авторизации с использованием Spring Security и JWT

## Описание

Этот проект демонстрирует базовую аутентификацию и авторизацию пользователей с использованием Spring Security и JWT. 
Приложение предоставляет API для аутентификации, регистрации пользователей и доступа к защищенным ресурсам.

## Шаги задания

### 1. Настройка проекта

- Создан новый проект Spring Boot.

### 2. Настройка конфигурации безопасности

- Базовая конфигурация Spring Security для приложения.
- Использование JWT для аутентификации пользователей.
- Класс для генерации и проверки JWT токенов.

### 3. Реализация контроллеров

- Контроллеры для аутентификации и регистрации пользователей.
- Методы для создания нового пользователя и генерации JWT токена при успешной аутентификации.
- Сохранение пользователей в базу данных PostgreSQL.
- Поддержка ролей пользователей и авторизация на основе ролей.

### 4. Тестирование

- Модульные тесты для сервисов.
- Проверка корректной работы аутентификации и авторизации.
- Проверка доступа к защищенным ресурсам только аутентифицированными пользователями.

### 5. Документация

- Добавлена краткая документация к API с использованием Swagger.

## Использование

### Запуск приложения

#### С использованием Docker

1. Установите Docker, если он не установлен:

    - [Установка Docker на Windows](https://docs.docker.com/desktop/install/windows-install/)
    - [Установка Docker на macOS](https://docs.docker.com/desktop/install/mac-install/)
    - [Установка Docker на Linux](https://docs.docker.com/desktop/install/linux-install/)

2. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/YuriPetukhov/spring_security_jwt.git
   ```
3. Перейдите в директорию проекта:
   ```bash
   cd spring-sec
   ```
4. Соберите Docker-образ приложения:
   ```bash
   docker build -t spring-sec .
   ```
5. Запустите контейнер:
   ```bash
   docker run -p 8080:8080 spring-sec
   ```
6. Запустите контейнер базы данных PostgreSQL:
   ```bash
   docker run -d -p 5432:5432 --name spring-sec-db -e POSTGRES_PASSWORD=your_password postgres
   ```
7. После этого приложение будет доступно по адресу http://localhost:8080.

## Аутентификация
Для аутентификации пользователя используйте следующий эндпоинт:

   ```bash
   POST /api/auth/login
   ```
Тело запроса должно содержать учетные данные пользователя в формате JSON:
   ```json
     {
        "username": "john",
        "email": "john@example.com",
        "password": "password"
      }
   ```

В случае успешной аутентификации будет возвращен JWT токен.

## Регистрация

Для регистрации нового пользователя используйте следующий эндпоинт:
   ```arduino
        POST /api/auth/register
   ```
Тело запроса должно содержать данные нового пользователя в формате JSON:
   ```json
      {
        "username": "john",
        "email": "john@example.com",
        "password": "password"
      }
   ```
## Доступ к защищенным ресурсам

Для доступа к защищенным ресурсам приложения необходимо передать JWT токен в заголовке Authorization. В противном случае будет возвращена ошибка аутентификации.

Пример запроса с использованием JWT токена:
   ```vbnet
       GET /api/protected/resource
       Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJKb2huIiwicm9sZXMiOiJST0xFX1VTRVIiLCJp
   ```